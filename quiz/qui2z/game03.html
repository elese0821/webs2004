<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>이미지 퀴즈 게임</title>
    <link rel="stylesheet" href="asset/css/style2.css">
    <style>
        /* CSS 스타일링은 여기에 추가하세요. */
    </style>
</head>

<body>
    <div id="back">
        <div id="main__wrap">
            <div class="quiz__header">
                <div class="timer-container">
                    <img id="clock" src="asset/img/clock.png" alt="clock">
                    <img id="gibon" src="asset/img/gibon.png" alt="gibon">
                    <div class="timer-bar"></div>
                    <div class="timer__sec">5</div>
                </div>
            </div>
            <!-- //quiz__header -->

            <div class="quiz__main">
                <div class="quiz__suggestion">가위~바위~보!</div>
                <div class="correct-answer none"></div>
                <div class="incorrect-answer none"></div>
                <div class="quiz__question">
                    <!-- 이미지를 랜덤으로 선택하여 나오도록 수정 -->
                </div>
                <div class="quiz__choice">
                    <div class="choice1" data-answer="false">
                        <img src="asset/img/rock.png" alt="">
                    </div>
                    <div class="choice2" data-answer="false">
                        <img src="asset/img/Scissors.png" alt="">
                    </div>
                    <div class="choice3" data-answer="false">
                        <img src="asset/img/paper.png" alt="">
                    </div>
                </div>
            </div>
            <!-- //quiz__main -->

            <div class="quiz__footer">
                <div class="footer_imgwrap">
                    <p>두뇌 메달</p>
                    <img src="asset/img/medal.png" alt="">
                </div>
            </div>
            <!-- //quiz__footer -->
        </div>
    </div>

    <script>
        // 이미지 파일명 목록
        const imageList = [
            "rock.png",
            "Scissors.png",
            "paper.png",
            // 다른 이미지 파일명들을 여기에 추가
        ];

        // 정답 목록
        const answerList = {
            "rock.png": "paper.png",
            "Scissors.png": "rock.png",
            "paper.png": "Scissors.png",
            // 다른 이미지에 대한 정답을 여기에 추가
        };

        // 점수 초기화
        let score = 0;

        // 5초 타이머 변수
        let timerInterval;
        let timerSeconds = 5; // 초기 타이머 값

        // 5초 타이머 시작 함수
        function startTimer() {
            timerInterval = setInterval(() => {
                if (timerSeconds <= 0) {
                    // 시간이 다 되었을 때 다음 문제로 넘어감
                    handleAnswerClick(false);
                } else {
                    // 시간을 1초씩 감소
                    document.querySelector('.timer__sec').textContent = timerSeconds;
                    timerSeconds--;
                }
            }, 1000);
        }

        // 5초 타이머 재설정 함수
        function resetTimer() {
            clearInterval(timerInterval);
            timerSeconds = 5; // 초기 타이머 값으로 재설정
            document.querySelector('.timer__sec').textContent = timerSeconds;
        }

        // 이미지 무작위 위치로 변경
        function randomizeImagePositions() {
            const choiceElements = document.querySelectorAll('.quiz__choice div');
            choiceElements.forEach((choice) => {
                const randomOrder = Math.floor(Math.random() * choiceElements.length);
                choice.style.order = randomOrder;
            });
        }

        // 랜덤 이미지 선택 및 표시
        function randomizeQuestionImage() {
            const questionElement = document.querySelector('.quiz__question');
            const randomImageIndex = Math.floor(Math.random() * imageList.length);
            const randomImageSrc = `asset/img/${imageList[randomImageIndex]}`;
            questionElement.innerHTML = `<img src="${randomImageSrc}" alt="">`;
        }

        // 이미지 푸터 이미지 변경
        function changeFooterImage() {
            const footerImg = document.querySelector('.quiz__footer img');
            if (score >= 50) {
                footerImg.src = 'asset/img/golden_medal.png';
            } else if (score >= 30) {
                footerImg.src = 'asset/img/silver_medal.png';
            } else if (score >= 10) {
                footerImg.src = 'asset/img/bronze_medal.png';
            } else {
                footerImg.src = 'asset/img/medal.png';
            }
        }

        // 정답 클릭 시 처리
        function handleAnswerClick(isCorrect) {
            resetTimer(); // 타이머 재설정

            const circle = document.querySelector(".correct-answer")
            const circle2 = document.querySelector(".incorrect-answer")
            if (isCorrect) {
                // 정답을 클릭한 경우
                score++;
                circle.classList.remove("none");

                // 일정 시간 후에 정답 표시를 제거
                setTimeout(() => {
                    circle.classList.add("none");
                }, 500); // 500ms(0.5초) 후에 제거
            } else {
                // 오답을 클릭한 경우
                circle2.classList.remove("none");
                setTimeout(() => {
                    circle2.classList.add("none");
                }, 500); // 500ms(0.5초) 후에 제거
            }

            // 이미지 위치 재배치
            randomizeImagePositions();

            // 랜덤 이미지 선택 및 표시
            randomizeQuestionImage();

            // 다음 문제로 넘어가기 (이 부분을 원하는 방식으로 업데이트하세요)
            startTimer(); // 타이머 재시작

            // 메달 이미지 변경
            changeFooterImage();
        }

        // 각 선택지에 클릭 이벤트 리스너 추가
        const choiceElements = document.querySelectorAll('.quiz__choice div');
        choiceElements.forEach((choice) => {
            choice.addEventListener('click', () => {
                const questionImageSrc = document.querySelector('.quiz__question img').src;
                const correctAnswer = answerList[questionImageSrc.substring(questionImageSrc.lastIndexOf('/') + 1)];
                const isCorrect = choice.querySelector('img').src.endsWith(correctAnswer);
                handleAnswerClick(isCorrect);
            });
        });

        // 페이지 로드 시 초기 이미지 위치 무작위 배치 및 랜덤 이미지 선택
        randomizeImagePositions();
        randomizeQuestionImage();
        startTimer(); // 타이머 시작
    </script>
</body>

</html>
